<html>
<head>
	<title>Filtros Pag. 53</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<div class="container">
		 <h1>¡Escuchemos algunas historias!</h1>
		 <div>
		 	<h3>Historias de ALex</h3>
		 	<ul>
		 		<li v-for="historia in historiasBy('Alex')" class="list-group-item-warning">
		 			{{ historia.writer }} dijo "{{ historia.plot }}"
		 		</li>
		 	</ul>
		 	<h3>Historias de Jhon</h3>
		 	<ul>
		 		<li v-for="historia in historiasBy('Jhon')" class="list-group-item-warning">
		 			{{ historia.writer }} dijo "{{ historia.plot }}"
		 		</li>
		 	</ul>
		 </div>
		 <hr>
		 //Property Computed
		 El mas fammoso es... : {{ famoso.length }}
		<ul class="list-group">
			<li v-for="historia in famoso" class="list-group-item" >
				{{ historia.writer }} dijo "{{ historia.plot }}"
				{{ historia.votos }} votos.
			</li>
		</ul>
		<hr>
		//Ejercicio de Busqueda de las historias
		<div class="form-group">
			<label for="query">
				¿Qué estás buscando?
			</label>
			<input type="text" v-model="query" class="form-control">
		</div>
		<h3>Resultados de la búsqueda:</h3>
		<ul class="list-group-item-warning">
			<li v-for="historia  in busqueda" class="list-group-item-info">
				{{ historia.writer }} dijo "{{ historia.plot }}"
			</li>
		</ul>
		<pre>{{ $data }}</pre>
	</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.1/vue.js"></script>
<script type="text/javascript">
	new Vue({
		el: '.container',
		data: {
			historias: [
				{	
					plot: "¡Estrellé mi auto hoy!",
					writer: "Alex",
					votos: 20
				},
				{	
					plot: "¡Ayer, alguien se robó mi bolso!",
					writer: "Jhon",
					votos: 25
				},
				{	
					plot: "¡Alguien se comió mi chocolate...!",
					writer: "Alex",
					votos: 35
				},
				{	
					plot: "¡Ayer, me comi una torta!",
					writer: "Alex",
					votos: 58
				},
				{	
					plot: "¡Alguien se comió mi chocolate...!",
					writer: "Jhon",
					votos: 40
				},
				{	
					plot: "¡Ayer, alguien se robó mi bolso!",
					writer: "Alex",
					votos: 58
				},
			],
			query: ''
		}, 
		methods: {
			 historiasBy: function(writer){
			 	return this.historias.filter(function(historia){
			 		return historia.writer === writer
			 	})
			 },
			
		},
		computed: {
			famoso: function(){
				//Las historias famosas mayores a 30 votos
				return this.historias.filter(function(item){
					return item.votos > 30;
				});
			},
			busqueda: function(){
				var query = this.query
				return this.historias.filter(function(historia){
					return historia.plot.includes(query)
				})
			}

		}
	})
</script>
</html>












